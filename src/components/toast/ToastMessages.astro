---
import { toastMessageArraySchema } from '@/server/toast-messages/types';
import { MessageContainer } from './messages/MessageContainer';

const messagesJson = Astro.cookies.get('toast-messages').value;
const messagesData = messagesJson ? JSON.parse(messagesJson) : [];

const validation = toastMessageArraySchema.safeParse(messagesData);
const messages = validation.success ? validation.data : [];
---

<MessageContainer client:load messages={messages} />
